<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Espace Client ‚Äî MHAN-Niger</title>
  <link rel="stylesheet" href="css/global.css" />
  <link rel="stylesheet" href="css/client.css" />
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar">
  <a href="index.html" class="nav-logo">
    <div class="logo-badge">M</div>
    MHAN<span>-Niger</span>
  </a>
  <ul class="nav-links">
    <li><a href="index.html">Accueil</a></li>
    <li><a href="services.html">Services</a></li>
    <li><a href="apropos.html">√Ä propos</a></li>
    <li><a href="contact.html">Contact</a></li>
    <li><a href="client.html" class="nav-cta actif">Espace Client</a></li>
  </ul>
  <button class="theme-toggle" id="themeToggle" title="Changer le th√®me">
    <span class="icone-soleil">‚òÄÔ∏è</span>
    <span class="icone-lune">üåô</span>
  </button>
  <button class="hamburger" id="hamburger">
    <span></span><span></span><span></span>
  </button>
</nav>

<!-- MENU MOBILE -->
<div class="menu-mobile" id="menuMobile">
  <button class="btn-fermer" id="btnFermer">‚úï</button>
  <a href="index.html">Accueil</a>
  <a href="services.html">Services</a>
  <a href="apropos.html">√Ä propos</a>
  <a href="contact.html">Contact</a>
  <a href="client.html">Espace Client</a>
</div>

<!-- PAGE CLIENT (Connexion / Inscription) -->
<section id="page-client">
  <div class="client-bg"></div>

  <div class="client-wrapper" id="clientWrapper">

    <!-- INFOS GAUCHE -->
    <div class="client-infos fade-left">
      <div class="section-tag">Portail s√©curis√©</div>
      <h1 class="section-titre">
        Votre espace<br/>
        <span style="color:var(--bleu-electrique)">MHAN-Niger</span>
      </h1>
      <p>
        Acc√©dez √† votre tableau de bord personnel pour suivre
        vos projets, consulter vos factures et contacter
        notre √©quipe de support.
      </p>
      <div class="client-features">
        <div class="client-feature">
          <div class="feature-icone">üìä</div>
          <div>
            <h4>Suivi de projets</h4>
            <p>Visualisez l'avancement de vos projets en temps r√©el.</p>
          </div>
        </div>
        <div class="client-feature">
          <div class="feature-icone">üé´</div>
          <div>
            <h4>Support d√©di√©</h4>
            <p>Soumettez et suivez vos tickets d'assistance.</p>
          </div>
        </div>
        <div class="client-feature">
          <div class="feature-icone">üìÑ</div>
          <div>
            <h4>Documents & Factures</h4>
            <p>Acc√©dez √† tous vos documents contractuels.</p>
          </div>
        </div>
        <div class="client-feature">
          <div class="feature-icone">üîí</div>
          <div>
            <h4>Acc√®s 100% s√©curis√©</h4>
            <p>Vos donn√©es prot√©g√©es par chiffrement avanc√©.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- BO√éTE AUTH -->
    <div class="auth-boite fade-right">

      <!-- ONGLETS -->
      <div class="auth-onglets">
        <button class="auth-onglet actif"
          onclick="basculerOnglet('connexion')">
          Se connecter
        </button>
        <button class="auth-onglet"
          onclick="basculerOnglet('inscription')">
          S'inscrire
        </button>
      </div>

      <!-- FORMULAIRE CONNEXION -->
      <form class="auth-form actif"
        id="formConnexion"
        onsubmit="seConnecter(event)">
        <div class="form-groupe">
          <label>Adresse email</label>
          <input type="email"
            id="connexionEmail"
            placeholder="votre@email.com"
            required />
        </div>
        <div class="form-groupe">
          <label>Mot de passe</label>
          <input type="password"
            id="connexionMotDePasse"
            placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
            required />
        </div>
        <button type="submit" class="auth-submit">
          Se connecter ‚Üí
        </button>
        <p class="auth-note">
          Mot de passe oubli√© ?
          <a href="contact.html">Contactez-nous</a>
        </p>
      </form>

      <!-- FORMULAIRE INSCRIPTION -->
      <form class="auth-form"
        id="formInscription"
        onsubmit="sInscrire(event)">
        <div class="form-groupe">
          <label>Nom complet</label>
          <input type="text"
            id="inscriptionNom"
            placeholder="Votre nom complet"
            required />
        </div>
        <div class="form-groupe">
          <label>Entreprise / Organisation</label>
          <input type="text"
            id="inscriptionEntreprise"
            placeholder="Nom de votre organisation" />
        </div>
        <div class="form-groupe">
          <label>Adresse email</label>
          <input type="email"
            id="inscriptionEmail"
            placeholder="votre@email.com"
            required />
        </div>
        <div class="form-groupe">
          <label>Service souhait√©</label>
          <select id="inscriptionService">
            <option value="" disabled selected>Choisissez un service</option>
            <option>Ing√©nierie Digitale</option>
            <option>Services Informatiques & R√©seaux</option>
            <option>Communication Digitale</option>
            <option>Cybers√©curit√© & Maintenance</option>
            <option>Autre demande</option> 
          </select>
        </div>
        <div class="form-groupe">
          <label>Mot de passe</label>
          <input type="password"
            id="inscriptionMotDePasse"
            placeholder="Cr√©ez un mot de passe"
            required />
        </div>
        <button type="submit" class="auth-submit">
          Cr√©er mon compte ‚Üí
        </button>
        <p class="auth-note">
          En vous inscrivant vous acceptez nos
          <a href="#">conditions d'utilisation</a>
        </p>
      </form>

    </div>
  </div>
</section>

<!-- DASHBOARD (affich√© apr√®s connexion) -->
<section id="dashboard">

  <!-- HEADER DASHBOARD -->
  <div class="dash-header">
    <div class="dash-user">
      <div class="dash-avatar" id="dashAvatar">U</div>
      <div>
        <div class="dash-nom" id="dashNom">Utilisateur</div>
        <div class="dash-role">Client MHAN-Niger</div>
      </div>
    </div>
    <button class="dash-deconnexion"
      onclick="seDeconnecter()">
      ‚Üê D√©connexion
    </button>
  </div>

  <!-- STATISTIQUES -->
  <div class="dash-stats">
    <div class="dash-stat">
      <div class="dash-stat-label">Projets actifs</div>
      <div class="dash-stat-valeur">
        2<span>+</span>
      </div>
      <div class="dash-stat-sub">En cours</div>
    </div>
    <div class="dash-stat">
      <div class="dash-stat-label">Tickets ouverts</div>
      <div class="dash-stat-valeur">1</div>
      <div class="dash-stat-sub">En attente</div>
    </div>
    <div class="dash-stat">
      <div class="dash-stat-label">Factures</div>
      <div class="dash-stat-valeur">3</div>
      <div class="dash-stat-sub">Documents</div>
    </div>
    <div class="dash-stat">
      <div class="dash-stat-label">Support</div>
      <div class="dash-stat-valeur">
        24<span>/7</span>
      </div>
      <div class="dash-stat-sub">Disponible</div>
    </div>
  </div>

  <!-- CONTENU DASHBOARD -->
  <div class="dash-grid">

    <!-- PROJETS -->
    <div class="dash-section">
      <h3>üìã Mes Projets</h3>
      <div class="projet-item">
        <div>
          <div class="projet-nom">Site Web Entreprise</div>
          <div class="projet-service">D√©veloppement Digital</div>
        </div>
        <span class="projet-statut statut-cours">En cours</span>
      </div>
      <div class="projet-item">
        <div>
          <div class="projet-nom">Installation R√©seau</div>
          <div class="projet-service">R√©seaux & Informatique</div>
        </div>
        <span class="projet-statut statut-attente">En attente</span>
      </div>
      <div class="projet-item">
        <div>
          <div class="projet-nom">Kit Starlink</div>
          <div class="projet-service">Services Starlink</div>
        </div>
        <span class="projet-statut statut-termine">Termin√©</span>
      </div>
    </div>

    <!-- ACTIVIT√âS -->
    <div class="dash-section">
      <h3>üîî Activit√©s r√©centes</h3>
      <div class="activite-item">
        <div class="activite-point"></div>
        <div>
          <div class="activite-texte">
            Mise √† jour du projet Site Web
          </div>
          <div class="activite-date">Il y a 2 heures</div>
        </div>
      </div>
      <div class="activite-item">
        <div class="activite-point"></div>
        <div>
          <div class="activite-texte">
            Nouvelle facture disponible
          </div>
          <div class="activite-date">Il y a 1 jour</div>
        </div>
      </div>
      <div class="activite-item">
        <div class="activite-point"></div>
        <div>
          <div class="activite-texte">
            Ticket #001 r√©solu
          </div>
          <div class="activite-date">Il y a 3 jours</div>
        </div>
      </div>
      <div class="activite-item">
        <div class="activite-point"></div>
        <div>
          <div class="activite-texte">
            Installation Starlink termin√©e
          </div>
          <div class="activite-date">Il y a 1 semaine</div>
        </div>
      </div>
    </div>

  </div>
</section>

<!-- FOOTER -->
<footer>
  <div class="footer-grid">
    <div class="footer-brand">
      <a href="index.html" class="nav-logo">
        <div class="logo-badge">M</div>
        MHAN<span>-Niger</span>
      </a>
      <p>Acteur engag√© de la transformation num√©rique au Niger.</p>
    </div>
    <div class="footer-col">
      <h4>Services</h4>
      <ul>
        <li><a href="services.html">D√©veloppement Digital</a></li>
        <li><a href="services.html">R√©seaux & Informatique</a></li>
        <li><a href="services.html">Communication Digitale</a></li>
        <li><a href="services.html">Services Starlink</a></li>
      </ul>
    </div>
    <div class="footer-col">
      <h4>Entreprise</h4>
      <ul>
        <li><a href="apropos.html">√Ä propos</a></li>
        <li><a href="contact.html">Contact</a></li>
        <li><a href="client.html">Espace Client</a></li>
      </ul>
    </div>
    <div class="footer-col">
      <h4>Contact</h4>
      <ul>
        <li><a href="#">Niamey, Niger</a></li>
        <li><a href="#">contact@mhan-niger.com</a></li>
        <li><a href="#">Support 24/7</a></li>
      </ul>
    </div>
  </div>
  <div class="footer-bottom">
    <p>¬© 2025 <span>MHAN-Niger</span>. Tous droits r√©serv√©s.</p>
    <p>Con√ßu avec <span>‚ô•</span> au Niger üá≥üá™</p>
  </div>
</footer>

<script src="js/global.js"></script>
<script src="js/api.js"></script>
<script>

// ‚îÄ‚îÄ BASCULER ONGLETS ‚îÄ‚îÄ
function basculerOnglet(onglet) {
  document.querySelectorAll('.auth-onglet').forEach(function(t, i) {
    t.classList.toggle('actif',
      (onglet === 'connexion' && i === 0) ||
      (onglet === 'inscription' && i === 1)
    );
  });
  document.getElementById('formConnexion')
    .classList.toggle('actif', onglet === 'connexion');
  document.getElementById('formInscription')
    .classList.toggle('actif', onglet === 'inscription');
}

// ‚îÄ‚îÄ CONNEXION ‚îÄ‚îÄ
async function seConnecter(event) {
  event.preventDefault();
  const email = document.getElementById('connexionEmail').value;
  const motDePasse = document.getElementById('connexionMotDePasse').value;
  const btn = event.target.querySelector('.auth-submit');
  btn.textContent = 'Connexion...';
  btn.disabled = true;

  const succes = await connecter(email, motDePasse);

  if (!succes) {
    btn.textContent = 'Se connecter ‚Üí';
    btn.disabled = false;
  }
}

// ‚îÄ‚îÄ INSCRIPTION ‚îÄ‚îÄ
async function sInscrire(event) {
  event.preventDefault();
  const nom = document.getElementById('inscriptionNom').value;
  const email = document.getElementById('inscriptionEmail').value;
  const motDePasse = document.getElementById('inscriptionMotDePasse').value;
  const entreprise = document.getElementById('inscriptionEntreprise').value;
  const service = document.getElementById('inscriptionService').value;
  const btn = event.target.querySelector('.auth-submit');
  btn.textContent = 'Cr√©ation...';
  btn.disabled = true;

  const succes = await inscrire(nom, email, motDePasse, entreprise, service);

  if (succes) {
    basculerOnglet('connexion');
    event.target.reset();
  }

  btn.textContent = 'Cr√©er mon compte ‚Üí';
  btn.disabled = false;
}

// ‚îÄ‚îÄ AFFICHER DASHBOARD ‚îÄ‚îÄ
function afficherDashboard(utilisateur) {
  document.getElementById('page-client').style.display = 'none';
  const dash = document.getElementById('dashboard');
  dash.classList.add('actif');
  document.getElementById('dashNom').textContent = utilisateur.nom;
  document.getElementById('dashAvatar').textContent =
    utilisateur.nom.charAt(0).toUpperCase();
}

// ‚îÄ‚îÄ D√âCONNEXION ‚îÄ‚îÄ
function seDeconnecter() {
  deconnecter();
  document.getElementById('dashboard').classList.remove('actif');
  document.getElementById('page-client').style.display = 'flex';
}

// ‚îÄ‚îÄ V√âRIFIER SI D√âJ√Ä CONNECT√â ‚îÄ‚îÄ
window.addEventListener('load', function() {
  if (estConnecte()) {
    const user = JSON.parse(localStorage.getItem('mhan_user'));
    if (user) afficherDashboard(user);
  }
});

</script>
</body>
</html>